
<!DOCTYPE html>
<html lang="en" ng-app="anngularApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>trellolo</title>

    <!-- Bootstrap core CSS -->
    <link href="vendors/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles/layout.css" rel="stylesheet">
    <link href="styles/main.css" rel="stylesheet">
      
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="vendors/bootstrap/js/bootstrap.min.js"></script>
    <script src="http://underscorejs.org/underscore.js"></script>

    <!-- Angular scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular-resource.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular-route.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
    <script src="vendors/angular/sortable.js"></script>
    <script src="vendors/angular/ngStorage.js"></script>

    <!-- Application scripts -->
    <script src="services/appService.js" type="text/javascript"></script>
    <script src="controllers/appController.js" type="text/javascript"></script>
    <script src="directives/cardbox.js" type="text/javascript"></script>
    <script src="app.js" type="text/javascript"></script>
  </head>

  <body ng-controller="BoardCtrl">
    
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">trellolo</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <!-- Place username and logout button here. -->
        </div><!--/.navbar-collapse -->
      </div>
    </nav>

    <ui-view></ui-view>

  </body>

  <script type="text/ng-template" id="/board.html">
    <div class="container">

      <div class="row">

        <div class="col-md-4">
          <h2>Backlog</h2>
          <p>
            <button ng-click="addStory('backlog', sortedStories['backlog'].length)" type="button" class="btn btn-primary btn-sm">Add Card</button>
            <button ng-click="clearBoard('backlog')" type="button" class="btn btn-default btn-sm">Clear Board</button>
          </p>
          <div ui-sortable="sortableStories[0]" ng-model="sortedStories['backlog']" class="story-container">
            <card-box ng-repeat="story in sortedStories['backlog'] | orderBy: ['rank']" story="story" trash="trashStory" class="story"></card-box>
          </div>
        </div>

        <div class="col-md-4">
          <h2>In Progress</h2>
          <p>
            <button ng-click="addStory('in_progress', sortedStories['in_progress'].length)" type="button" class="btn btn-primary btn-sm">Add Card</button>
            <button ng-click="clearBoard('in_progress')" type="button" class="btn btn-default btn-sm">Clear Board</button>
          </p>
          <div ui-sortable="sortableStories[1]" ng-model=" sortedStories['in_progress']" class="story-container">
            <card-box ng-repeat="story in sortedStories['in_progress'] | orderBy: ['rank']" story="story" trash="trashStory" class="story"></card-box>
          </div>
       </div>

        <div class="col-md-4">
          <h2>Done</h2>
          <p>
            <button ng-click="addStory('done', sortedStories['done'].length)" type="button" class="btn btn-primary btn-sm">Add Card</button>
            <button ng-click="clearBoard('done')" type="button" class="btn btn-default btn-sm">Clear Board</button>
          </p>
          <div ui-sortable="sortableStories[2]" ng-model="sortedStories['done']" class="story-container">
            <card-box ng-repeat="story in sortedStories['done'] | orderBy: ['rank']" story="story" trash="trashStory" class="story"></card-box>
          </div>
        </div>

      </div>
    </div> <!-- /container -->
    <footer class="footer"> <!-- footer -->
      <div class="container">
        <button ng-click="judiciousPurging()" type="button" class="btn btn-default btn-lg">
          <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
        </button>
        <deleted-card-box ng-repeat="story in sortedStories['deleted']" story="story" remove="removeStory"></deleted-card-box>
      </div>
    </footer> <!-- /footer -->
  </script>

  <script type="text/ng-template" id="/stories.html">
    
  </script>

  <script type="text/ng-template" id="/card.html">
    <div ng-mouseenter="show=true" ng-mouseleave="show=false" class="alert alert-warning {{color}}">
      
      <button ng-show="show" ng-click="trashStory(story)" type="button" class="close" data-dismiss="alert">
        <span aria-hidden="true">&times;</span>
        <span class="sr-only">Close</span>
      </button>
      
      {{story.color}}
      {{story.status}}
      {{story.rank}}

      <div ng-hide="titleEdit" class="ng-hide card-title">
        <h4>{{ story.title }}</h4>
        <span ng-show="show" ng-click="editTitle()" class="glyphicon glyphicon-pencil"></span>
      </div>
      
      <div ng-show="titleEdit" class="card-title">
        <input ng-model="card.title" type="text" class="form-control">
        <button ng-click="saveTitle(title)" type="button" class="btn btn-primary btn-sm">Save</button>
        <button ng-click="cancelTitle()" type="button" class="btn btn-default btn-sm">Cancel</button>
      </div>
      
      <div ng-show="show" class="card-color">
        <span ng-click="changeColor('red')" class="label label-danger">HIGH</span>
        <span ng-click="changeColor('blue')" class="label label-primary">MID</span>
        <span ng-click="changeColor('green')" class="label label-success">LOW</span>
        <span ng-click="changeColor('yellow')" class="label label-warning">SOSO</span>
        <span ng-click="changeColor('white')" class="label label-default">NO</span>
      </div>

      <hr>
      <div ng-hide="contentEdit" class="ng-hide card-content">
        <p>{{ story.content }}</p>
        <span ng-show="show" ng-click="editContent()" class="glyphicon glyphicon-pencil"></span>
      </div>
      
      <div ng-show="contentEdit" class="card-content">
        <textarea ng-model="card.content" class="form-control" rows="3"></textarea>
        <button ng-click="saveContent(content)" type="button" class="btn btn-primary btn-sm">Save</button>
        <button ng-click="cancelContent()" type="button" class="btn btn-default btn-sm">Cancel</button>
      </div>

    </div>
  </script>  

  <script type="text/ng-template" id="/deleted_card.html">
    <div>
      {{story.title}} - {{story.status}} <span ng-click="removeStory(story)">Delete Me</span>
    </div>
  </script>
</html>
